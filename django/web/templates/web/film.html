{% extends "base_generic.html" %} {% block content %} {% load static %}
<script src="{% static 'film.js'%}" defer></script>
<style>
  .checked {
    color: orange;
  }

  .star {
    max-width: 25px;
  }
</style>

<div class="row">
  <div class="col">
    <img
      class="rounded img-fluid mh-25"
      src="{{film.photo_url}}"
      alt="Film poster"
    />
  </div>
  <div class="col">
    <h1>{{ film.title }}</h1>
    <p><strong>Duration:</strong> {{ film.duration }}</p>
    <p><strong>Release Date:</strong> {{ film.release_date }}</p>

    <p><strong>Plot:</strong> {{ film.plot }}</p>
    <p><strong>Actors:</strong> {{ film.actors.all|join:", " }}</p>
    <p><strong>Directors:</strong> {{ film.directors.all|join:", " }}</p>
    <p><strong>Language:</strong> {{ film.languages.all|join:", " }}</p>
    <p><strong>Genre:</strong> {{ film.genres.all|join:", " }}</p>
  </div>
</div>
<div class="row">
  <form
    id="rate-form"
    action="{% url 'rating' film.id %}"
    method="POST"
    class="mb-3 w-50 card-body d-flex flex-column align-items-center"
  >
    {% csrf_token %} {{ form.errors }}
    <div hidden>{{ form.film }}</div>

    <div class="col text-center">
      <p>Reviewing as: {{user}}</p>
      {{ form.review }}
    </div>
    <br />
    <div class="col text-center">
      <p>
        {% for rate in RATING_CHOICES %}
        <input
          hidden
          type="radio"
          name="score"
          id="score{{ forloop.counter }}"
          value="{{ rate.0 }}"
        ></input>
        <label class="mx-1 fa fa-star star fa-2x" for="score{{ forloop.counter }}" id="{{ forloop.counter }}"></label>
        {% endfor %}
      </p>
    </div>
    <br/>
    <button
      class="btn btn-primary d-block main-button"
      type="submit"
      value="submit"
    >
      <b>Submit</b>
    </button>
  </form>
</div>

{% for rating in film.rating_set.all %}
<p>{{rating.user}} {{rating.score}}</p>
{% endfor%} {% endblock %}
